<i18n>
{
  "en" : {
    "header" : "The download should begin very soon.",
    "p1" : "You'll be redirected back in",
    "unit":"seconds",
    "ps" : "P.S: This feature may not be working on some OS. Sorry for the inconvenience.",
    "skills": {
      "HTML5": "HTML5",
      "CSS3": "CSS3",
      "JavaScript": "JavaScript",
      "GIT": "GIT",
      "Responsive Design": "Responsive Design",
      "Browser Developer Tools": "Browser Developer Tools",
      "Vue": "Vue.js",
      "Microsoft Office": "Microsoft Office",
      "ImageMaSo": "Image manipulation software",
      "Linux": "Linux",
      "Design": "Design",
      "Nuxt": "Nuxt.js",
      "React" : "React.js",
      "Express" : "Express.js",
      "Bootstrap": "Bootstrap",
      "Next" :"Next.js",
      "MaterialDesign" : "Material Design",
      "Node" : "Node.js",

      "Excitement for learning": "Excitement for learning",
      "Communication Skills": "Communication Skills",
      "Problem-Solving Skills": "Problem-Solving Skills",
      "Work Ethic": "Work Ethic",
      "Flexibility": "Flexibility",
      "Adaptability": "Adaptability"
    }
  },
  "de" : {
    "header" : "Der Download sollte sehr bald beginnen.",
    "p1" : "Sie werden zurückgeleitet in",
    "unit":"sekunden",
    "ps" : "P.S: Diese Funktion funktioniert möglicherweise nicht auf einigen Betriebssystemen. Entschuldigen Sie die Unannehmlichkeiten.",
    "skills" : {
      "HTML5": "HTML5",
      "CSS3": "CSS3",
      "JavaScript": "JavaScript",
      "GIT": "GIT",
      "Responsive Design": "Sich anpassendes Design",
      "Browser Developer Tools": "Browser-Entwicklertools",
      "Vue": "Vue.js",
      "Microsoft Office": "Microsoft Office",
      "ImageMaSo": "Bildbearbeitungssoftware",
      "Linux": "Linux",
      "Design": "Design",
      "Nuxt": "Nuxt.js",
      "React" : "React.js",
      "Express" : "Express.js",
      "Bootstrap": "Bootstrap",
      "Next" :"Next.js",
      "MaterialDesign" : "Material Design",
      "Node" : "Node.js",

      "Excitement for learning": "Aufregung zum Lernen",
      "Communication Skills": "Kommunikationsfähigkeiten",
      "Problem-Solving Skills": "Fähigkeiten zur Problemlösung",
      "Work Ethic": "Arbeitsethik",
      "Flexibility": "Flexibilität",
      "Adaptability": "Anpassungsfähigkeit"
    }
  },
  "es" : {
    "header" : "La descarga debería comenzar muy pronto.",
    "p1" : "Serás redirigido de nuevo a",
    "unit":"segundos",
    "ps" : "P.S: Es posible que esta función no funcione en algunos sistemas operativos. Lo siento por los inconvenientes ocasionados. ",
    "skills" : {
      "HTML5": "HTML5",
      "CSS3": "CSS3",
      "JavaScript": "JavaScript",
      "GIT": "GIT",
      "Responsive Design": "Diseño de respuesta",
      "Browser Developer Tools": "Herramientas para desarrolladores del navegador",
      "Vue": "Vue.js",
      "Microsoft Office": "Microsoft Office",
      "ImageMaSo": "Software de manipulación de imágenes",
      "Linux": "Linux",
      "Design": "Design",
      "Nuxt": "Nuxt.js",
      "React" : "React.js",
      "Express" : "Express.js",
      "Bootstrap": "Bootstrap",
      "Next" :"Next.js",
      "MaterialDesign" : "Material Design",
      "Node" : "Node.js",

      "Excitement for learning": "Emoción por aprender",
      "Communication Skills": "Habilidades de comunicación",
      "Problem-Solving Skills": "Habilidades para resolver problemas",
      "Work Ethic": "Ética laboral",
      "Flexibility": "Flexibilidad",
      "Adaptability": "Adaptabilidad"
    }
  },
  "fr" : {
    "header" : "Le téléchargement devrait commencer très bientôt.",
    "p1" : "Vous serez redirigé vers",
    "unit":"secondes",
    "ps" : "PS : Cette fonctionnalité peut ne pas fonctionner sur certains systèmes d'exploitation. Désolé pour le dérangement.",
    "skills" : {
      "HTML5": "HTML5",
      "CSS3": "CSS3",
      "JavaScript": "JavaScript",
      "GIT": "GIT",
      "Responsive Design": "Conception réactive",
      "Browser Developer Tools": "Outils de développement de navigateur",
      "Vue": "Vue.js",
      "Microsoft Office": "Microsoft Office",
      "ImageMaSo": "Logiciel de manipulation d'images",
      "Linux": "Linux",
      "Design": "Compétences en conception",
      "Nuxt": "Nuxt.js",
      "React" : "React.js",
      "Express" : "Express.js",
      "Bootstrap": "Bootstrap",
      "Next" :"Next.js",
      "MaterialDesign" : "Material Design",
      "Node" : "Node.js",

      "Excitement for learning": "Excitation d'apprendre",
      "Communication Skills": "Compétences en communication",
      "Problem-Solving Skills": "Des talents pour la résolution des problèmes",
      "Work Ethic": "Éthique de travail",
      "Flexibility": "Flexibilité",
      "Adaptability": "Adaptabilité"
    }
  },
  "it" : {
    "header" : "Il download dovrebbe iniziare molto presto.",
    "p1" : "Verrai reindirizzato indietro in",
    "unit":"secondi",
    "ps" : "P.S: questa funzione potrebbe non funzionare su alcuni sistemi operativi. Ci dispiace per l'inconvenienza. ",
    "skills" : {
      "HTML5": "HTML5",
      "CSS3": "CSS3",
      "JavaScript": "JavaScript",
      "GIT": "GIT",
      "Responsive Design": "Design reattivo",
      "Browser Developer Tools": "Strumenti per sviluppatori del browser",
      "Vue": "Vue.js",
      "Microsoft Office": "Microsoft Office",
      "ImageMaSo": "Software di manipolazione delle immagini",
      "Linux": "Linux",
      "Design": "Capacità di progettazione",
      "Nuxt": "Nuxt.js",
      "React" : "React.js",
      "Express" : "Express.js",
      "Bootstrap": "Bootstrap",
      "Next" :"Next.js",
      "MaterialDesign" : "Material Design",
      "Node" : "Node.js",

      "Excitement for learning": "Eccitazione per l'apprendimento",
      "Communication Skills": "Capacità di comunicazione",
      "Problem-Solving Skills": "Capacità di risoluzione dei problemi",
      "Work Ethic": "Lavoro etico",
      "Flexibility": "Flessibilità",
      "Adaptability": "Adattabilità"
    }
  },
  "ru" : {
    "header" : "Загрузка должна начаться очень скоро.",
    "p1" : "Вы будете перенаправлены обратно через",
    "unit":"секунды",
    "ps" : "P.S: Эта функция может не работать в некоторых ОС. Извините за причиненные неудобства.",
      "skills" : {
      "HTML5": "HTML5",
      "CSS3": "CSS3",
      "JavaScript": "JavaScript",
      "GIT": "GIT",
      "Responsive Design": "Адаптивный дизайн",
      "Browser Developer Tools": "Инструменты разработчика браузера",
      "Vue": "Vue.js",
      "Microsoft Office": "Microsoft Office",
      "ImageMaSo": "Программа для обработки изображений",
      "Linux": "Linux",
      "Design": "Дизайн",
      "Nuxt": "Nuxt.js",
      "React" : "React.js",
      "Express" : "Express.js",
      "Bootstrap": "Bootstrap",
      "Next" :"Next.js",
      "MaterialDesign" : "Material Design",
      "Node" : "Node.js",

      "Excitement for learning": "Желание к обучению",
      "Communication Skills": "Навыки общения",
      "Problem-Solving Skills": "Навыки решения проблем",
      "Work Ethic": "Рабочая этика",
      "Flexibility": "Гибкость",
      "Adaptability": "Адаптивность"
    }
  }
}
</i18n>
<template>
  <div>
    <div>
      <h2>{{ $t("header") }}</h2>
      <p>
        <span>{{ $t("p1") }}</span> <span>{{ n }} </span
        ><span>{{ $t("unit") }}</span
        >...
      </p>
      <p>
        {{ $t("ps") }}
      </p>
      <h3>
        Back to
        <router-link to="/">
          Home
        </router-link>
      </h3>
    </div>
    <div id="document" ref="document" class="html d-none">
      <div class="body">
        <div class="upper-section">
          <div class="name-and-contacts">
            <h2>Mikhail Krivoshchekov (Mike)</h2>
            <h3>{{ $t("person.position") }}</h3>
            <p>
              {{ $t("expAboutMe.dobDate") }}({{ currentAge
              }}{{ $t("expAboutMe.yearsOld") }})
            </p>
            <p>{{ $t("expAboutMe.addr") }}</p>
            <ul>
              <li v-for="contact in contacts" :key="contact.i">
                {{ contact.addr }}
              </li>
            </ul>
          </div>
          <img src="/my-face.jpg" alt="alt" class="avatar" />
        </div>
        <hr />
        <div class="bottom-section">
          <div class="soft-skills">
            <ul>
              <li v-for="softSkill in softSkills" :key="softSkill.i">
                {{ $t(`skills.${softSkill.title}`) }}
              </li>
            </ul>
          </div>
          <div class="about-me">
            <div class="langs">
              <ul>
                <h3>
                  {{ $t("expAboutMe.languages") }}
                </h3>
                <li>
                  <flag iso="gb" /> {{ $t("expAboutMe.eng") }}
                  <span class="secondary--text">{{
                    $t("expAboutMe.lvFl")
                  }}</span>
                </li>
                <li>
                  <flag iso="ru" /> {{ $t("expAboutMe.rus") }}
                  <span class="secondary--text">{{
                    $t("expAboutMe.lvNa")
                  }}</span>
                </li>
                <li>
                  <flag iso="it" /> {{ $t("expAboutMe.ita") }}
                  <span class="secondary--text">{{
                    $t("expAboutMe.lvBa")
                  }}</span>
                </li>
                <li>
                  <flag iso="es" /> {{ $t("expAboutMe.esp") }}
                  <span class="secondary--text">{{
                    $t("expAboutMe.lvBa")
                  }}</span>
                </li>
              </ul>
            </div>
            <p>
              {{ $t("lightCv.thisIs") }}<br />
              {{ $t("lightCv.visitThis") }}
              <a href="https://hire-mike.web.app/en/cv-mike"
                >hire-mike.web.app</a
              >
              <br />
              {{ $t("lightCv.scanThis") }}
            </p>
            <div class="qrcode">
              <img src="/cv-qr.png" alt="" />
            </div>
            <p>{{ $t("lightCv.ty") }}</p>
          </div>
          <div class="hard-skills">
            <ul>
              <li v-for="hardSkill in hardSkills" :key="hardSkill.i">
                {{ $t(`skills.${hardSkill.title}`) }}
              </li>
            </ul>
          </div>
        </div>
        <div class="bottom-disclaimer">
          <p>The PDF created at {{ todays }}</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import html2pdf from "html2pdf.js";
// import { jsPDF } from "jspdf";
// import html2canvas from "html2canvas"

export default {
  data() {
    return {
      contacts: [
        { name: "email", addr: "MikeLitoris34@icloud.com" },
        { name: "phone", addr: "+39 351 0499 441" },
      ],
      currentAge: "",
      todays: "",
      n: 5,
    };
  },

  computed: {
    skills() {
      return this.$store.state.skills;
    },
    hardSkills() {
      return this.skills.filter((skill) => skill.type === "hard");
    },
    softSkills() {
      return this.skills.filter((skill) => skill.type === "soft");
    },
  },
  beforeMount: function() {
    this.getAge("1994/03/15");
  },
  mounted: function() {
    var element = document.getElementById("document");
    var opt = {
      margin: 0,
      filename: `!CV-MIKE-${this.$i18n.locale.toUpperCase()}.pdf'`,
      image: { type: "jpeg", quality: 0.98 },
      html2canvas: { scale: 3 },
      jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
    };
    html2pdf()
      .from(element)
      .set(opt)
      .save();
    this.countdown();
    setTimeout(() => {
      this.$router.go(-1);
    }, this.n * 1000);
  },

  methods: {
    getAge(dateString) {
      var today = new Date();
      var birthDate = new Date(dateString);
      var age = today.getFullYear() - birthDate.getFullYear();
      var m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      return (
        (this.currentAge = age),
        (this.todays = today),
        console.log("age: " + this.currentAge + " " + typeof this.currentAge)
      );
    },
    countdown() {
      setInterval(() => {
        this.n -= 1;
      }, 1000);
    },
  },
};
</script>

<style>
li {
  margin: 5px 0 5px 0;
}
.html {
  height: 100%;
}
.body {
  /* height: 100vh; */
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin: 5px 40px auto 100px;
}
.upper-section {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
}
.avatar {
  margin-bottom: 20px;
  max-width: 200px;
}
.bottom-section {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  border-bottom: solid grey 2px;
}
.hard-skills {
  text-align: right;
}
.about-me {
  border-right: solid grey 2px;
  border-left: solid grey 2px;
  padding: 0 5px 0 5px;
  width: 400px;
  display: flex;
  flex-direction: column;
  text-align: center;
}
.qrcode {
  display: flex;
  justify-content: center;
  padding: 10px 0 10px 0;
}
.qrcode img {
  width: 150px;
  height: 150px;
}
.hard-skills li,
.soft-skills li {
  margin-top: 5px;
  padding-bottom: 2px;
  border-bottom: dashed #808080a9 0.5px;
}
.bottom-disclaimer {
  margin-top: 40px;
  display: flex;
  justify-content: right;
}
</style>
